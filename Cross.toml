# Cross.toml - Configuration for cross-compilation tool
# https://github.com/cross-rs/cross

# Enable bindgen feature for aws-lc-sys in all musl builds
[build.env]
passthrough = [
    "AWS_LC_SYS_EXTERNAL_BINDGEN",
]

# Pre-build script to install bindgen in the container
[target.x86_64-unknown-linux-musl]
pre-build = [
    "apt-get update && apt-get install -y cmake clang llvm-dev libclang-dev",
]

[target.i686-unknown-linux-musl]
pre-build = [
    "dpkg --add-architecture i386",
    "apt-get update && apt-get install -y cmake clang llvm-dev libclang-dev",
]

[target.aarch64-unknown-linux-musl]
pre-build = [
    "apt-get update && apt-get install -y cmake clang llvm-dev libclang-dev",
]

[target.armv7-unknown-linux-musleabihf]
pre-build = [
    "apt-get update && apt-get install -y cmake clang llvm-dev libclang-dev",
]

[target.arm-unknown-linux-musleabihf]
pre-build = [
    "apt-get update && apt-get install -y cmake clang llvm-dev libclang-dev",
]
